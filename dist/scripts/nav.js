"use strict";!function(){Array.prototype.remove=function(n,e){var o=this.slice((e||n)+1||this.length);return this.length=n<0?this.length+n:n,this.push.apply(this,o)},Array.prototype.findArrayIndex=function(n){if(!(null==this?0:this.length))return-1;for(var e=-1,o=0;o<this.length;++o)if(n(this[o])){e=o;break}return e};var n={getUrlParam:function(n){var e=new RegExp("(^|&)"+n+"=([^&]*)(&|$)"),o=window.location.search.substr(1).match(e);return null!=o?unescape(o[2]):null},ajax:function(n){$.ajax({url:n.url,data:n.data||{},type:n.type||"get",dataType:n.dataType||"json",jsonp:n.jsonp,jsonpCallback:n.jsonpCallback,beforeSend:n.beforeSend||function(){},complete:n.complete||function(){},success:n.success||function(n){},error:n.error||function(n){layer.msg(n)}})},promise:function(n){var e=$.Deferred();return $.ajax({url:n.url,data:n.data||{},type:n.type||"get",dataType:n.dataType||"json",jsonp:n.jsonp,jsonpCallback:n.jsonpCallback,beforeSend:n.beforeSend||function(){$(".content-wrap").css("background","url(../images/minipop/loading.gif) no-repeat center")},complete:n.complete||function(){$(".content-wrap").css("background","none")},success:function(n){e.resolve(n)},error:function(n){e.reject(n)}}),e.promise()}};window.commonObj=n;var e=new Vue({el:"#box",data:{navMenu:[{name:"常用网站",categroy:"common"},{name:"产品中心",categroy:"pro"},{name:"游戏业务",categroy:"game"},{name:"广告业务",categroy:"ad"},{name:"增值业务",categroy:"inc"}],active:"common",commonList:[],navList:{}},mounted:function(){"undefined"!==localStorage.getItem("commonList")&&(this.commonList=JSON.parse(localStorage.getItem("commonList"))),n.ajax({url:"../mock/nav/navList.json",dataType:"jsonp",jsonpCallback:"nav",success:function(n){e.navList=n.data}}),$(window).on("beforeunload",function(){localStorage.setItem("commonList",JSON.stringify(e.commonList))}),$('[href="#nav-common"]').on("click",function(n){n.preventDefault(),$.scrollTo($("#nav-common").offset().top,800)}),$('[href="#nav-pro"]').on("click",function(n){n.preventDefault(),$.scrollTo($("#nav-pro").offset().top,800)}),$('[href="#nav-game"]').on("click",function(n){n.preventDefault(),$.scrollTo($("#nav-game").offset().top,800)}),$('[href="#nav-ad"]').on("click",function(n){n.preventDefault(),$.scrollTo($("#nav-ad").offset().top,800)}),$('[href="#nav-inc"]').on("click",function(n){n.preventDefault(),$.scrollTo($("#nav-inc").offset().top,800)});new ScrollSpy(".nav-ul",{nav:"a",className:"on"})},methods:{selected:function(n){this.active=n},addCommon:function(e){var n="";-1!=e.id.indexOf("pro")?n="pro":-1!=e.id.indexOf("game")?n="game":-1!=e.id.indexOf("ad")?n="ad":-1!=e.id.indexOf("inc")&&(n="inc"),e.icon=n;var o=this.commonList||[],t=o.findArrayIndex(function(n){return n.id==e.id});-1!==t&&o.remove(t),11<o.length&&o.pop(),o.unshift(e),this.commonList=o}}})}();